---
title: 设计模式那点事儿——桥接模式
tags: [develop,设计模式]
date: 2016-08-01 12:03:36
---

# 定义
桥接模式(Bridge Pattern)：将抽象部分与它的实现部分分离，使它们都可以独立地变化。它是一种对象结构型模式，又称为柄体(Handle and Body)模式或接口(Interface)模式。

# 实例解析
**实例：路上行驶的汽车**
就拿汽车在路上行驶的来说。即有小汽车又有公共汽车，它们都不但能在市区中的公路上行驶，也能在高速公路上行驶。这你会发现，对于交通工具（汽车）有不同的类型，然而它们所行驶的环境（路）也在变化，在软件系统中就要适应两个方面的变化？怎样实现才能应对这种变化呢？


# 实现代码
## 抽象类 路
```php
/**
 * 路 抽象类
 * Created by DannyWang
 * wangjue@mia.com
 * 2016/8/1
 */
abstract class Road {
    // 路上行驶的汽车
    protected $car;

    // 开始走
    abstract public function Go();

    // 设置路上的汽车（组合）
    public function setCar(Car $car) {
        $this->car = $car;
    }
}
```

## 高速公路类
```php
/**
 * 高速公路类
 * Created by DannyWang
 * wangjue@mia.com
 * 2016/8/1
 */
class SpeedRoad extends Road {

    public function Go() {
        // 汽车启动
        $this->car->Run();
        var_dump('on SpeedRoad');
    }
}
```

## 街道类
```php
/**
 * 街道类
 * Created by DannyWang
 * wangjue@mia.com
 * 2016/8/1
 */
class StreetRoad extends Road {
    public function Go() {
        $this->car->Run();
        var_dump('on StreetRoad');
    }
}
```

## 抽象类 车
```php
/**
 * 车 抽象类
 * Created by DannyWang
 * wangjue@mia.com
 * 2016/8/1
 */
abstract class Car {
    abstract public function Run();
}
```

## 小汽车类
```php
/**
 * 小汽车类
 * Created by DannyWang
 * wangjue@mia.com
 * 2016/8/1
 */
class AutoCar extends Car {
    public function Run() {
        var_dump('auto car run');
    }
}
```

## 公交车类
```php
/**
 * 公交车类
 * Created by DannyWang
 * wangjue@mia.com
 * 2016/8/1
 */
class Bus extends Car {
    public function Run() {
        var_dump('Bus run');
    }
}
```

## 调用客户端
```php
/**
 * 客户端
 * 变继承为组合的一种方式
 * Bridge 模式把两个角色之间的继承关系改为了耦合的关系，从而使这两者可以从容自若的各自独立的变化
 *
 * Created by DannyWang
 * wangjue@mia.com
 * 2016/8/1
 */
require_once(__DIR__ . '/Car.php');
require_once(__DIR__ . '/Road.php');
require_once(__DIR__ . '/AutoCar.php');
require_once(__DIR__ . '/Bus.php');
require_once(__DIR__ . '/SpeedRoad.php');
require_once(__DIR__ . '/StreetRoad.php');

// 高速公路上行驶小汽车
$road1 = new SpeedRoad();
// 设置路上行驶的车辆（可变化）
$road1->setCar(new AutoCar());
$road1->Go();
echo '===========';

// 街道上行驶公交车
$road2 = new StreetRoad();
$road2->setCar(new Bus());
$road2->Go();

```

## 结果输出
```
E:\DannyCode\study\Bridge\AutoCar.php:11:string 'auto car run' (length=12)
E:\DannyCode\study\Bridge\SpeedRoad.php:14:string 'on SpeedRoad' (length=12)
===========
E:\DannyCode\study\Bridge\Bus.php:11:string 'Bus run' (length=7)
E:\DannyCode\study\Bridge\StreetRoad.php:12:string 'on StreetRoad' (length=13)
```

# 参考链接
[桥接模式](http://design-patterns.readthedocs.io/zh_CN/latest/structural_patterns/bridge.html)

[桥接模式-cnblog](http://www.cnblogs.com/houleixx/archive/2008/02/23/1078877.html)